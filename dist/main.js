(()=>{"use strict";const t=t=>{localStorage.setItem("tasks",JSON.stringify(t))},e=(()=>{let t=[];return{setTask:e=>{t.push(e)},getArray:()=>t,modifyTask:(e,s,a)=>{t[e][s]=a},setArray:e=>{t=[...e]},removeTask:e=>{t.splice(e,1)}}})(),s=(t,e)=>{t.innerHTML="",e.forEach(((e,s)=>{const a=document.createElement("div");a.setAttribute("class","task"),a.setAttribute("id",s);const r=document.createElement("span");r.setAttribute("value",s),"undone"===e.status?r.setAttribute("class","taskTitle"):r.setAttribute("class","taskTitle strikeText"),r.innerText=e.title;const n=document.createElement("span");n.setAttribute("value",s),"undone"===e.status?n.setAttribute("class","taskDescription"):n.setAttribute("class","taskDescription strikeText"),n.innerText=e.description;const i=document.createElement("img");"undone"===e.status?i.setAttribute("src","../src/images/unmarked_checkbox.png"):i.setAttribute("src","../src/images/marked_checkbox.png"),i.setAttribute("value",s),i.setAttribute("class","checkImage");const c=document.createElement("img");c.setAttribute("value",s),c.setAttribute("src","../src/images/edit.png"),c.setAttribute("class","editImage taskImage");const o=document.createElement("img");o.setAttribute("value",s),o.setAttribute("src","../src/images/bin.png"),o.setAttribute("class","deleteImage taskImage"),a.appendChild(i),a.appendChild(r),a.appendChild(c),a.appendChild(n),a.appendChild(o),t.appendChild(a)}))},a=t=>{t.classList.toggle("visibility")};(()=>{const r=document.getElementById("taskContainer"),n=document.getElementById("addTaskButton"),i=document.getElementById("addTaskForm"),c=document.querySelector(".viewBlocker"),o=document.getElementById("title");n.addEventListener("click",(()=>{l(),o.focus(),s(r,e.getArray()),u(),d()})),c.addEventListener("click",(()=>{l()})),i.addEventListener("keydown",(t=>{"Escape"!==t.key||c.classList.contains("visibility")||l()})),i.addEventListener("submit",(a=>{let n;a.preventDefault(),n=0===e.getArray().length?0:e.getArray().length;const i={title:form.title.value,description:form.description.value,status:"undone",position:n};e.setTask(i),l(),s(r,e.getArray()),u(),form.reset(),t(e.getArray())})),document.addEventListener("DOMContentLoaded",(()=>{localStorage.getItem("library")?e.setArray(JSON.parse(localStorage.getItem("tasks"))):t(e.getArray()),s(r,e.getArray()),u(),d()}));const l=()=>{var t;(t=n).classList.contains("rotate45")?t.classList.replace("rotate45","rotate0"):(t.classList.remove("rotate0"),t.classList.add("rotate45")),a(c),a(i)},d=()=>{[...document.querySelectorAll(".deleteImage")].forEach((a=>{a.addEventListener("click",(a=>{e.removeTask(a.target.attributes[0].value),e.getArray().forEach(((t,s)=>{e.modifyTask(s,"position",s)})),s(r,e.getArray()),d(),u(),t(e.getArray())}))}))},u=()=>{[...document.querySelectorAll(".checkImage")].forEach((a=>{a.addEventListener("click",(a=>{var n,i,c;n=a.target.attributes[1].value,i=e.getArray(),c=e.modifyTask,"undone"===i.find((t=>t.position==n)).status?c(n,"status","done"):c(n,"status","undone"),s(r,e.getArray()),u(),d(),t(e.getArray())}))}))}})()})();